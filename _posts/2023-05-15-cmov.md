---
layout: post
title:  "분기문보다 cmov가 더 빠를 수 있을까?(작성중)"
date:   2023-05-13 23:13:00 +0900
categories: CS
comments: true
---
얼마 전 분기없이 작성한 퀵정렬이 최대 80% 가량의 성능향상을 가져온다는 글을 보았다.  
<https://arxiv.org/abs/1604.06697>  

기본적인 아이디어는 branch를 쓰지 않고,  
setcc와 cmov같은 Conditional Move를 사용한다는 것이다.  

그런데 생각을 해보면..  
Branch와 Conditional Move가 뭐가 다를까?  

1. 어차피 setcc와 cmov도 비교(cmp) 가 끝날 때 까지 파이프라인 stall이 걸린다.  
2. Branch만 History가 기록되나?  
3. cmov는 투기적 실행을 하지 않는가?  

인텔 메뉴얼을 살펴보자.  
Intel 64 and IA-32 Architecture Optimization Reference Manual, 2016. Order Number:
248966-032.

